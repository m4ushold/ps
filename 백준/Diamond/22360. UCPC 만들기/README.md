# [Diamond V] UCPC 만들기 - 22360 

[문제 링크](https://www.acmicpc.net/problem/22360) 

### 성능 요약

메모리: 49296 KB, 시간: 1808 ms

### 분류

센트로이드, 센트로이드 분할, 자료 구조, 분할 정복, 작은 집합에서 큰 집합으로 합치는 테크닉, 트리, 트리를 사용한 집합과 맵

### 제출 일자

2025년 2월 3일 00:22:49

### 문제 설명

<p>정점이 $N$개인 트리가 주어진다. 트리의 각 정점에는 1부터 $N$까지의 번호가 매겨져 있으며, 알파벳 <code>U</code>, <code>C</code>, <code>P</code> 중 하나가 쓰여 있다. 이때 다음 조건을 만족하는 $(a, b)$ 순서쌍의 개수를 구하여라. $(1 \leq a < b \leq N)$</p>

<ul>
	<li>정점 $a$에서 정점 $b$에 이르는 단순 경로에 포함된 모든 정점에 쓰인 문자들을 모은 뒤 재배열하여 $($<code>UCPC</code>$)^k$ 꼴의 문자열을 만들 수 있다. ($k \geq 1$)</li>
</ul>

### 입력 

 <p>첫 번째 줄에는 정점의 개수 $N$이 주어진다. $(1 \leq N \leq 200\ 000)$</p>

<p>그 다음 줄에는 알파벳 <code>U</code>, <code>C</code>, <code>P</code>로만 이루어진 길이 $N$의 문자열 $S$가 주어진다.</p>

<p>그 다음 $N-1$개의 줄에 걸쳐 두 정수 $u_i$와 $v_i$가 공백으로 구분되어 주어진다. 이는 트리에서 정점 $u_i$와 정점 $v_i$가 직접 연결되어 있음을 의미한다. $(1 \leq u_i, v_i \leq N, u_i \neq v_i)$</p>

### 출력 

 <p>조건을 만족하는 $(a, b)$ 순서쌍의 개수를 출력한다.</p>

