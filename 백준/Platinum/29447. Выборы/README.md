# [Platinum I] Выборы - 29447 

[문제 링크](https://www.acmicpc.net/problem/29447) 

### 성능 요약

메모리: 6444 KB, 시간: 184 ms

### 분류

값 / 좌표 압축, mo's, 오프라인 쿼리

### 제출 일자

2024년 3월 31일 13:48:17

### 문제 설명

<p>Недавно в стране прошли выборы, при проведении которых были использованы современные технологии: про каждый бюллетень известно, когда он был положен в урну и кандидат, за которого проголосовал человек, опустивший в урну этот бюллетень. После подсчета голосов все, кому не лень, захотели проанализировать ход выборов. Ведь не зря же вводилась вся эта система?</p>

<p>Многим стала интересна следующая информация: <<за какого кандидата было отдано больше всего голосов за заданный промежуток времени?>>. Ведь, если за какого-то кандидата в какой-то небольшой промежуток времени голосовали активно, а в остальное --- менее активно, то, возможно, в этот промежуток времени была совершена фальсификация. Для ответа на эти запросы даже был создан специальный сайт, на котором каждый посетитель, которому небезразлична судьба страны, мог узнать интересующую его информацию. Однако, количество посетителей оказалось неожиданно большим, и сайт перестал справляться с нагрузками.</p>

<p>Руководством решено было переписать все так, чтобы обслуживать одновременно $m$ пользователей. Вам поручено реализовать программу, отвечающую на вопрос, который ставят пользователи: <<За кого больше всего голосовали в данный промежуток времени?>>.</p>

### 입력 

 <p>В первой строке задано количество обработанных бюллетеней $n$ ($1 \leq n \leq 100,000$). Во второй строке через пробел заданы $n$ целых чисел $a_i$ ($1 \leq a_i \leq 10^9$) --- номер кандидата, за которого проголосовал человек, опустивший в урну бюллетень номер $i$. В третьей строке задано число $m$ ($1 \leq m \leq 100,000$) --- количество запросов. В следующих $m$ строках заданы сами запросы в формате $l_i$ $r_i$ ($1 \leq l_i \leq r_i \leq n$) --- числа, характеризующие очередной запрос.</p>

### 출력 

 <p>Для каждого запроса в отдельной строке выведите одно число --- номер самого популярного кандидата среди бюллетеней с номерами не меньшими $l_i$ и не большими $r_i$. Самым популярным называется такой кандидат, за которого среди бюллетеней с подходящими номерами отдано количество голосов не меньшее, чем за любого другого кандидата среди этих же бюллетеней.</p>

